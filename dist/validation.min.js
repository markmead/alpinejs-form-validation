(()=>{function h(s,n,u,m,v=!1){let a=t=>n.includes(t),e=t=>{let d=n.indexOf(t);if(d===-1||d+1>=n.length)return null;let r=Number(n[d+1]);return isNaN(r)?null:r},l=m(u),i={...a("required")&&{required:!0},...a("min")&&(()=>{let t=e("min");return t!==null?{min:t}:null})(),...a("max")&&(()=>{let t=e("max");return t!==null?{max:t}:null})(),...a("min:length")&&(()=>{let t=e("min:length");return t!==null?{minLength:t}:null})(),...a("max:length")&&(()=>{let t=e("max:length");return t!==null?{maxLength:t}:null})(),...a("checked")&&{checked:!0}};l(t=>{if(!v&&!t&&!s.getAttribute("data-validation-dirty"))return;let d={required:()=>!!t,min:()=>t>=i.min,max:()=>t<=i.max,minLength:()=>t.length>=i.minLength,maxLength:()=>t.length<=i.maxLength,checked:()=>!!t},r=Object.keys(i).reduce((o,c)=>(d[c]&&(o[c]=d[c]()),o),{}),f=Object.values(r).every(Boolean),x=Object.keys(r).find(o=>!r[o]),b={"data-validation-dirty":!0,"data-validation-valid":f,"data-validation-reason":x||"","data-validation-status":JSON.stringify(r),"data-validation-options":JSON.stringify(i)};Object.entries(b).forEach(([o,c])=>{s.setAttribute(o,c)})})}function g(s){s.directive("validation",(n,{modifiers:u,expression:m},{evaluateLater:v,effect:a})=>{a(()=>h(n,u,m,v)),document.addEventListener("validate",e=>{let{target:l}=e;l.contains(n)&&h(n,u,m,v,!0)}),document.addEventListener("reset",e=>{let{target:l}=e;if(!l.contains(n))return;["data-validation-dirty","data-validation-valid","data-validation-reason","data-validation-status","data-validation-options"].forEach(t=>n.removeAttribute(t))})})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(g));})();
