(()=>{function h(s,a,m,u,v=!1){let i=t=>a.includes(t),n=t=>{let r=a.indexOf(t);if(r===-1||r+1>=a.length)return null;let d=Number(a[r+1]);return isNaN(d)?null:d},c=u(m),e={...i("required")&&{required:!0},...i("min")&&n("min")!==null&&{min:n("min")},...i("max")&&n("max")!==null&&{max:n("max")},...i("min:length")&&n("min:length")!==null&&{minLength:n("min:length")},...i("max:length")&&n("max:length")!==null&&{maxLength:n("max:length")},...i("checked")&&{checked:!0}};c(t=>{if(!v&&!t&&!s.getAttribute("data-validation-dirty"))return;let r={required:()=>!!t,min:()=>t>=e.min,max:()=>t<=e.max,minLength:()=>t.length>=e.minLength,maxLength:()=>t.length<=e.maxLength,checked:()=>!!t},d=Object.keys(e).reduce((o,l)=>(r[l]&&(o[l]=r[l]()),o),{}),f=Object.values(d).every(Boolean),x=Object.keys(d).find(o=>!d[o]),b={"data-validation-dirty":!0,"data-validation-valid":f,"data-validation-reason":x||"","data-validation-status":JSON.stringify(d),"data-validation-options":JSON.stringify(e)};Object.entries(b).forEach(([o,l])=>{s.setAttribute(o,l)})})}function g(s){s.directive("validation",(a,{modifiers:m,expression:u},{evaluateLater:v,effect:i})=>{i(()=>h(a,m,u,v)),document.addEventListener("validate",n=>{let{target:c}=n;c.contains(a)&&h(a,m,u,v,!0)}),document.addEventListener("reset",n=>{let{target:c}=n;if(!c.contains(a))return;["data-validation-dirty","data-validation-valid","data-validation-reason","data-validation-status","data-validation-options"].forEach(t=>a.removeAttribute(t))})})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(g));})();
