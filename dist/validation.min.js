(()=>{function h(s,n,l,m,v=!1){let a=t=>n.includes(t),i=t=>{let o=n.indexOf(t);return o!==-1?Number(n[o+1]):null},r=m(l),e={...a("required")&&{required:!0},...a("min")&&{min:i("min")},...a("max")&&{max:i("max")},...a("min:length")&&{minLength:i("min:length")},...a("max:length")&&{maxLength:i("max:length")},...a("checked")&&{checked:!0}};r(t=>{if(!v&&!t&&!s.getAttribute("data-validation-dirty"))return;let o={required:()=>!!t,min:()=>t>=e.min,max:()=>t<=e.max,minLength:()=>t.length>=e.minLength,maxLength:()=>t.length<=e.maxLength,checked:()=>!!t},u=Object.keys(e).reduce((d,c)=>(o[c]&&(d[c]=o[c]()),d),{}),f=Object.values(u).every(Boolean),x=Object.keys(u).find(d=>!u[d]),b={"data-validation-dirty":!0,"data-validation-valid":f,"data-validation-reason":x||"","data-validation-status":JSON.stringify(u),"data-validation-options":JSON.stringify(e)};Object.entries(b).forEach(([d,c])=>{s.setAttribute(d,c)})})}function g(s){s.directive("validation",(n,{modifiers:l,expression:m},{evaluateLater:v,effect:a})=>{a(()=>h(n,l,m,v)),document.addEventListener("validate",i=>{let{target:r}=i;r.contains(n)&&h(n,l,m,v,!0)}),document.addEventListener("reset",i=>{let{target:r}=i;if(!r.contains(n))return;["data-validation-dirty","data-validation-valid","data-validation-reason","data-validation-status","data-validation-options"].forEach(t=>n.removeAttribute(t))})})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(g));})();
