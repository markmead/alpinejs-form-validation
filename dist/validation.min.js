(()=>{function h(u,a,l,m,v=!1){let o=t=>a.includes(t),c=t=>{let d=a.indexOf(t);if(d===-1||d+1>=a.length)return null;let i=Number(a[d+1]);return isNaN(i)?null:i},e=(t,d)=>{if(!o(t))return null;let i=c(t);return i!==null?{[d]:i}:null},g=m(l),r={...o("required")&&{required:!0},...e("min","min"),...e("max","max"),...e("min:length","minLength"),...e("max:length","maxLength"),...o("checked")&&{checked:!0}};g(t=>{if(!v&&!t&&!u.getAttribute("data-validation-dirty"))return;let d={required:()=>!!t,min:()=>{let n=Number(t);return!isNaN(n)&&n>=r.min},max:()=>{let n=Number(t);return!isNaN(n)&&n<=r.max},minLength:()=>t.length>=r.minLength,maxLength:()=>t.length<=r.maxLength,checked:()=>!!t},i=Object.keys(r).reduce((n,s)=>(d[s]&&(n[s]=d[s]()),n),{}),b=Object.values(i).every(Boolean),x=Object.keys(i).find(n=>!i[n]),N={"data-validation-dirty":!0,"data-validation-valid":b,"data-validation-reason":x||"","data-validation-status":JSON.stringify(i),"data-validation-options":JSON.stringify(r)};Object.entries(N).forEach(([n,s])=>{u.setAttribute(n,s)})})}function f(u){u.directive("validation",(a,{modifiers:l,expression:m},{evaluateLater:v,effect:o})=>{o(()=>h(a,l,m,v)),document.addEventListener("validate",c=>{let{target:e}=c;e.contains(a)&&h(a,l,m,v,!0)}),document.addEventListener("reset",c=>{let{target:e}=c;if(!e.contains(a))return;["data-validation-dirty","data-validation-valid","data-validation-reason","data-validation-status","data-validation-options"].forEach(r=>a.removeAttribute(r))})})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(f));})();
