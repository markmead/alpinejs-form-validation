(()=>{function g(c,i,l,u,m=!1){let d=t=>i.includes(t),v=t=>{let r=i.indexOf(t);if(r===-1||r+1>=i.length)return null;let e=Number(i[r+1]);return isNaN(e)?null:e},o=(t,r)=>{if(!d(t))return null;let e=v(t);return e!==null?{[r]:e}:null},s=u(l),a=Object.fromEntries(Object.entries({...d("required")&&{required:!0},...o("min","min"),...o("max","max"),...o("min:length","minLength"),...o("max:length","maxLength"),...d("checked")&&{checked:!0}}).filter(([,t])=>t!=null));s(t=>{if(!m&&(t==null||t==="")&&!c.getAttribute("data-validation-dirty"))return;let r={required:()=>!!t,min:()=>{let n=Number(t);return!isNaN(n)&&n>=a.min},max:()=>{let n=Number(t);return!isNaN(n)&&n<=a.max},minLength:()=>String(t||"").length>=a.minLength,maxLength:()=>String(t||"").length<=a.maxLength,checked:()=>!!t},e={};for(let[n]of Object.entries(a))r[n]&&(e[n]=r[n]());let f=Object.values(e).every(Boolean),b=Object.keys(e).find(n=>!e[n]),x={"data-validation-dirty":!0,"data-validation-valid":f,"data-validation-reason":b||"","data-validation-status":JSON.stringify(e),"data-validation-options":JSON.stringify(a)};Object.entries(x).forEach(([n,N])=>{c.setAttribute(n,N)})})}function h(c){c.directive("validation",(i,{modifiers:l,expression:u},{evaluateLater:m,effect:d})=>{d(()=>g(i,l,u,m));let v=s=>{let{target:a}=s;a.contains(i)&&g(i,l,u,m,!0)},o=s=>{let{target:a}=s;if(!a.contains(i))return;["data-validation-dirty","data-validation-valid","data-validation-reason","data-validation-status","data-validation-options"].forEach(r=>i.removeAttribute(r))};return document.addEventListener("validate",v),document.addEventListener("reset",o),()=>{document.removeEventListener("validate",v),document.removeEventListener("reset",o)}})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(h));})();
