function h(s,a,m,v,l=!1){let n=t=>a.includes(t),i=t=>{let o=a.indexOf(t);return o!==-1?Number(a[o+1]):null},r=v(m),e={...n("required")&&{required:!0},...n("min")&&{min:i("min")},...n("max")&&{max:i("max")},...n("min:length")&&{minLength:i("min:length")},...n("max:length")&&{maxLength:i("max:length")},...n("checked")&&{checked:!0}};r(t=>{if(!l&&!t&&!s.getAttribute("data-validation-dirty"))return;let o={required:()=>!!t,min:()=>t>=e.min,max:()=>t<=e.max,minLength:()=>t.length>=e.minLength,maxLength:()=>t.length<=e.maxLength,checked:()=>!!t},u=Object.keys(e).reduce((d,c)=>(o[c]&&(d[c]=o[c]()),d),{}),f=Object.values(u).every(Boolean),x=Object.keys(u).find(d=>!u[d]),b={"data-validation-dirty":!0,"data-validation-valid":f,"data-validation-reason":x||"","data-validation-status":JSON.stringify(u),"data-validation-options":JSON.stringify(e)};Object.entries(b).forEach(([d,c])=>{s.setAttribute(d,c)})})}function g(s){s.directive("validation",(a,{modifiers:m,expression:v},{evaluateLater:l,effect:n})=>{n(()=>h(a,m,v,l)),document.addEventListener("validate",i=>{let{target:r}=i;r.contains(a)&&h(a,m,v,l,!0)}),document.addEventListener("reset",i=>{let{target:r}=i;if(!r.contains(a))return;["data-validation-dirty","data-validation-valid","data-validation-reason","data-validation-status","data-validation-options"].forEach(t=>a.removeAttribute(t))})})}var A=g;export{A as default};
