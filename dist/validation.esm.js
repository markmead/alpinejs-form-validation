function v(c,i,u,l,m=!1){let d=t=>i.includes(t),s=t=>{let r=i.indexOf(t);if(r===-1||r+1>=i.length)return null;let a=Number(i[r+1]);return isNaN(a)?null:a},e=(t,r)=>{if(!d(t))return null;let a=s(t);return a!==null?{[r]:a}:null},h=l(u),o={...d("required")&&{required:!0},...e("min","min"),...e("max","max"),...e("min:length","minLength"),...e("max:length","maxLength"),...d("checked")&&{checked:!0}};h(t=>{if(!m&&!t&&!c.getAttribute("data-validation-dirty"))return;let r={required:()=>!!t,min:()=>{let n=Number(t);return!isNaN(n)&&n>=o.min},max:()=>{let n=Number(t);return!isNaN(n)&&n<=o.max},minLength:()=>t.length>=o.minLength,maxLength:()=>t.length<=o.maxLength,checked:()=>!!t},a={};for(let[n]of Object.entries(o))r[n]&&(a[n]=r[n]());let g=Object.values(a).every(Boolean),b=Object.keys(a).find(n=>!a[n]),x={"data-validation-dirty":!0,"data-validation-valid":g,"data-validation-reason":b||"","data-validation-status":JSON.stringify(a),"data-validation-options":JSON.stringify(o)};Object.entries(x).forEach(([n,N])=>{c.setAttribute(n,N)})})}function f(c){c.directive("validation",(i,{modifiers:u,expression:l},{evaluateLater:m,effect:d})=>{d(()=>v(i,u,l,m)),document.addEventListener("validate",s=>{let{target:e}=s;e.contains(i)&&v(i,u,l,m,!0)}),document.addEventListener("reset",s=>{let{target:e}=s;if(!e.contains(i))return;["data-validation-dirty","data-validation-valid","data-validation-reason","data-validation-status","data-validation-options"].forEach(o=>i.removeAttribute(o))})})}var p=f;export{p as default};
