function f(r,n,d,o,c=!1){let i=t=>n.find(a=>a===t)??!1,m=o(d),e={};if(i("required")&&(e.required=!0),i("min")){let t=n.indexOf(i("min"));e.min=Number(n[t+1])}if(i("max")){let t=n.indexOf(i("max"));e.max=Number(n[t+1])}if(i("min:length")){let t=n.indexOf(i("min:length"));e.minLength=Number(n[t+1])}if(i("max:length")){let t=n.indexOf(i("max:length"));e.maxLength=Number(n[t+1])}i("checked")&&(e.checked=!0),m(t=>{if(!c&&!t&&!r.getAttribute("data-validation-dirty"))return;let a={};i("required")&&(a.required=!!t),i("min")&&(a.min=t>=e.min),i("max")&&(a.max=t<=e.max),i("min:length")&&(a.minLength=t.length>=e.minLength),i("max:length")&&(a.maxLength=t.length<=e.maxLength),i("checked")&&(a.checked=!!t);let g=Object.values(a).every(x=>x);r.setAttribute("data-validation-dirty",!0),r.setAttribute("data-validation-valid",g),r.setAttribute("data-validation-status",JSON.stringify(a)),r.setAttribute("data-validation-options",JSON.stringify(e)),r.dispatchEvent(new CustomEvent("error",{bubbles:!0,cancelable:!0,detail:JSON.stringify(a)}))})}function u(r){r.directive("validation",(n,{modifiers:d,expression:o},{evaluateLater:c,effect:i})=>{i(()=>f(n,d,o,c)),document.addEventListener("validate",m=>{let{target:t}=m;t.contains(n)&&f(n,d,o,c,!0)})}),r.magic("valid",()=>(n,d)=>!JSON.parse(n)[d])}var v=u;export{v as default};
