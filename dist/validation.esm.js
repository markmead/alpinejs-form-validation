function h(s,a,m,u,v=!1){let i=t=>a.includes(t),n=t=>{let d=a.indexOf(t);if(d===-1||d+1>=a.length)return null;let r=Number(a[d+1]);return isNaN(r)?null:r},c=u(m),e={...i("required")&&{required:!0},...i("min")&&n("min")!==null&&{min:n("min")},...i("max")&&n("max")!==null&&{max:n("max")},...i("min:length")&&n("min:length")!==null&&{minLength:n("min:length")},...i("max:length")&&n("max:length")!==null&&{maxLength:n("max:length")},...i("checked")&&{checked:!0}};c(t=>{if(!v&&!t&&!s.getAttribute("data-validation-dirty"))return;let d={required:()=>!!t,min:()=>t>=e.min,max:()=>t<=e.max,minLength:()=>t.length>=e.minLength,maxLength:()=>t.length<=e.maxLength,checked:()=>!!t},r=Object.keys(e).reduce((o,l)=>(d[l]&&(o[l]=d[l]()),o),{}),f=Object.values(r).every(Boolean),x=Object.keys(r).find(o=>!r[o]),b={"data-validation-dirty":!0,"data-validation-valid":f,"data-validation-reason":x||"","data-validation-status":JSON.stringify(r),"data-validation-options":JSON.stringify(e)};Object.entries(b).forEach(([o,l])=>{s.setAttribute(o,l)})})}function g(s){s.directive("validation",(a,{modifiers:m,expression:u},{evaluateLater:v,effect:i})=>{i(()=>h(a,m,u,v)),document.addEventListener("validate",n=>{let{target:c}=n;c.contains(a)&&h(a,m,u,v,!0)}),document.addEventListener("reset",n=>{let{target:c}=n;if(!c.contains(a))return;["data-validation-dirty","data-validation-valid","data-validation-reason","data-validation-status","data-validation-options"].forEach(t=>a.removeAttribute(t))})})}var A=g;export{A as default};
