function h(u,a,l,m,v=!1){let d=t=>a.includes(t),c=t=>{let o=a.indexOf(t);if(o===-1||o+1>=a.length)return null;let e=Number(a[o+1]);return isNaN(e)?null:e},i=(t,o)=>{if(!d(t))return null;let e=c(t);return e!==null?{[o]:e}:null},g=m(l),r={...d("required")&&{required:!0},...i("min","min"),...i("max","max"),...i("min:length","minLength"),...i("max:length","maxLength"),...d("checked")&&{checked:!0}};g(t=>{if(!v&&!t&&!u.getAttribute("data-validation-dirty"))return;let o={required:()=>!!t,min:()=>{let n=Number(t);return!isNaN(n)&&n>=r.min},max:()=>{let n=Number(t);return!isNaN(n)&&n<=r.max},minLength:()=>t.length>=r.minLength,maxLength:()=>t.length<=r.maxLength,checked:()=>!!t},e=Object.keys(r).reduce((n,s)=>(o[s]&&(n[s]=o[s]()),n),{}),b=Object.values(e).every(Boolean),x=Object.keys(e).find(n=>!e[n]),N={"data-validation-dirty":!0,"data-validation-valid":b,"data-validation-reason":x||"","data-validation-status":JSON.stringify(e),"data-validation-options":JSON.stringify(r)};Object.entries(N).forEach(([n,s])=>{u.setAttribute(n,s)})})}function f(u){u.directive("validation",(a,{modifiers:l,expression:m},{evaluateLater:v,effect:d})=>{d(()=>h(a,l,m,v)),document.addEventListener("validate",c=>{let{target:i}=c;i.contains(a)&&h(a,l,m,v,!0)}),document.addEventListener("reset",c=>{let{target:i}=c;if(!i.contains(a))return;["data-validation-dirty","data-validation-valid","data-validation-reason","data-validation-status","data-validation-options"].forEach(r=>a.removeAttribute(r))})})}var A=f;export{A as default};
